
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Wendi's Notes</title>
  <meta name="author" content="Wendi">

  
  <meta name="description" content="这世道觉得文绉绉的诬陷没问题，这世道让那些不说粗话但最缺德的人能做道德评判家，这世道让那些话不脏但心眼脏、手段脏的人当道，这世道能任意颠倒黑白、混淆是非，这世道觉得公众人物或者随便谁说一个“操”字就不应该，那就操翻这世道。 很多人恨特权，因为特权没有在自己手中。 还有某些人开会制定了应对措施， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ifyouseewendy.github.io/blog">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Wendi's Notes" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div id="header-inner">
    <span class="first"><a href="/">Wendi's Notes</a></span>
    <span><a href="/about">about</a></span>
    <span><a href="http://www.github.com/">projects</a></span>
    <span class="last"><a href="/atom.xml" title="subscribe via RSS">rss</a></span>
  </div>
</hgroup>

</header>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/18/han-han-wo-suo-li-jie-de-sheng-huo/">韩寒 - 我所理解的生活</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-18T18:00:46+08:00" pubdate data-updated="true">May 18<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>这世道觉得文绉绉的诬陷没问题，这世道让那些不说粗话但最缺德的人能做道德评判家，这世道让那些话不脏但心眼脏、手段脏的人当道，这世道能任意颠倒黑白、混淆是非，这世道觉得公众人物或者随便谁说一个“操”字就不应该，那就操翻这世道。</p>

<p>很多人恨特权，因为特权没有在自己手中。</p>

<p>还有某些人开会制定了应对措施，这些措施中甚至包括联合一些专职黑我的人再次对我进行诽谤和攻击。当然，最后这些没有实施，因为他们发现所谓黑，都是无需组织的，我如果说饭能吃屎不能吃，他们都能捧着马桶干杯。</p>

<p>缘分不是走在街上非要撞见，缘分就是睡前醒后彼此想念。</p>

<p>没人能让所有人满意，所以让自己和你中意的人满意就可以了。你所判定的一切，也许就是你自己内心的投影。</p>

<p>我也将尽我所能，为在乎我的人创造各种东西，绝不向厌恶我的人解释这是个什么东西。</p>

<p>我是一个虚荣的人，有时候甚至还虚伪。由于我得到的越来越多，所以也可以假装越来越不虚荣，因为有了一些真荣。但我的内心还是虚荣的。不出席所有颁奖典礼、不去各种上流场合其实是另外一种虚荣，并不是淡泊。</p>

<p>开了几天的微博，我陷入了一种意淫的豪迈。</p>

<p>我越来越觉得很多东西的结果，其实并不是不同人的改变，而只是同类人的聚集。在我的微博马甲里，你觉得这个政府糟透了，时日不多。在别人的微博马甲里，你觉得生活挺安逸的，一切都好。所以，你所关注的一切，就是你所看到的世界。</p>

<p>每个人的道路都不同，我走在我的野路上，她走在她的大路上，都值得祝福。只要不走歪路邪路，每条道路都有成功的方式。黄思路也是，</p>

<p>你知道你能做到，别人觉得你也许可以做到，那么，少废话，做到再说，其他的怨气都是虚妄。</p>

<p>这枚碎片不是新型的，也不是心形的，它的不规则是规则的。</p>

<p>至少在文字中你很擅长论理，对你来说，论理这个事，最重要的一点是什么？我觉得论理最重要的一点就是不用典。</p>

<p>互联网多年，出现了很多聪明人，但完全没能稀释这个世界上笨蛋的浓度。</p>

<p>写作三种：说服你，拉拢他，剖析我。最早的我一直在第一种，后来发现容易背叛自己。于是我到了第二种，又发现容易迎合大众。我一直在去往第三种，路上有反复，有踌躇，有代价，有痛苦，但那才是一个真正的写作者要去的地方。否则你只是一个饭局作家，一个去了香港买了本地摊杂志就假装知道中国政治内幕。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/18/rails4way-environments-and-configurations/">Rails4Way - Environments and Configurations</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-18T16:10:42+08:00" pubdate data-updated="true">May 18<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Bundler <a href="http://bundler.io">ref</a></h2>

<p>Bundler does gem dependency resolution based on Gemfile.</p>

<ol>
<li><p>The specifier <strong>~&gt;</strong> has a special meaning, best shown by example. <code>~&gt; 2.0.3</code> is identical to <code>&gt;= 2.0.3</code> and <code>&lt; 2.1</code>. <code>~&gt; 2.1</code> is identical to <code>&gt;= 2.1</code> and <code>&lt; 3.0</code>. <code>~&gt; 2.2.beta</code> will match prerelease versions like <code>2.2.beta.12</code>.</p>
<div class="highlight"><pre><code class="text">gem &#39;thin&#39;,  &#39;~&gt;1.1&#39;
</code></pre></div></li>
<li><p>Occasionally, the name of the gem that should be used in a require statement is
different than the name of that gem in the repository. In those cases, the <strong>:require</strong>
option solves this simply and declaratively right in the Gemfile.</p>
<div class="highlight"><pre><code class="text">gem &#39;sqlite3-ruby&#39;, :require =&gt; &#39;sqlite3&#39;
</code></pre></div></li>
<li><p><strong>group</strong></p>
<div class="highlight"><pre><code class="text">gem &#39;wirble&#39;, :group =&gt; :development
gem &#39;ruby-debug&#39;, :group =&gt; [:development, :test]

group :test do
  gem &#39;rspec&#39;
end
</code></pre></div></li>
<li><p><strong>bundle install/update</strong></p>

<p>-&gt; calculate a dependency tree -&gt; generate Gemfile.lock</p></li>
<li><p><strong>bundle package</strong></p>

<blockquote>
<p>it will package up all your gems in <strong>vendor/cache</strong> directory. Running <strong>bundle install</strong> will use the gems in package and skip connecting to rubygems.org. use this to avoid external dependencies at deploy time, or if you depend on private gems that you are not available in any public repository.</p>
</blockquote></li>
<li><p><strong>bundle exec</strong></p>

<p>Non-Rails scripts must be executed with this to get a properly initialized RubyGems environment.</p></li>
<li><p><strong>bundle install &#8211;path vender/bundle &#8211;binstubs</strong></p>

<p>The default location for gems installed by bundler is directory named <strong>.bundle</strong> in your user directory.</p>

<p>This command will generate .bundle/config file:</p>
<div class="highlight"><pre><code class="text"> ---
 BUNDLE_BIN: bundler_stubs
 BUNDLE_PATH: vendor/bundle
 BUNDLE_DISABLE_SHARED_GEMS: &quot;1&quot;
</code></pre></div>
<p>gems in <strong>verdor/cache</strong>, and installed in <strong>vendor/bundle</strong>.</p></li>
<li><p><strong>bundle install vendor &#8211;disable-shared-gems</strong></p>

<blockquote>
<p>This command tells Bundler to install gems even if they are already installed in the system. Normally Bunlder avoids that symlinks to already downloaded gems that exists in your system. This option is useful when you are trying to package up an application that all dependencies unpacked.</p>
</blockquote></li>
</ol>

<h2>Startup and Application Settings</h2>

<p><code>boot.rb</code></p>

<ul>
<li>sets up Bundler and load paths</li>
</ul>

<p><code>application.rb</code></p>

<ul>
<li>require &#39;boot&#39;</li>
<li>load rails gems, gems for the specified Rail.env, and configures the application ( <strong>define Application class</strong> ).</li>
</ul>

<p><code>environment.rb</code></p>

<ul>
<li>require &#39;application&#39;</li>
<li>runs all initializers ( <code>Application.initialize!</code> )</li>
</ul>

<p><code>environments/development.rb | test.rb | production.rb</code></p>

<ul>
<li>makes environmental configuraions.</li>
<li>application.rb makes unenvironmental configurations, like time-zone, autoload_paths, encoding.</li>
</ul>

<h3>Some Configurations</h3>

<h4>Wrap Parameters</h4>

<p>Introduced in Rails 3.1, the <code>wrap_parameters.rb</code> initializer configures your application to work with JavaScript MVC frameworks.</p>

<p>When submitting JSON parameters to a controller, Rails will wrap the parameters into a nested hash, with the controller’s name being set as the key. To illustrate, consider the following JSON:</p>
<div class="highlight"><pre><code class="text">{&quot;title&quot;: &quot;TheRails4Way&quot;}
</code></pre></div>
<p>If a client submitted the above JSON to a controller named ArticlesController, Rails would nest the params hash under the key “article”. This ensures the setting of model attributes from request parameters is consistent with the convention used when submitting from Rails form helpers.</p>
<div class="highlight"><pre><code class="text">{&quot;title&quot;: &quot;TheRails4Way&quot;, &quot;article&quot; =&gt; {&quot;title&quot;: &quot;TheRails4Way&quot;}}
</code></pre></div>
<h4>Schema Dumper</h4>
<div class="highlight"><pre><code class="text">config.active_record.schema_format = :sql
</code></pre></div>
<p>Every time you run tests, Rails dumps the schema of your development database and copies it to the test database using an auto generated <code>schema.rb</code> script. It looks very similar to an Active Record migration script; in fact, it uses the same API.</p>

<h4>Automatic Class Reloading</h4>
<div class="highlight"><pre><code class="text">config.cache_classes = false
</code></pre></div>
<p>Without getting into too much nitty-gritty detail, when the config.cache_classes setting is true,Rails willuse Ruby’s <code>require</code> statement to do its class loading, and when it is false, it will use <code>load</code> instead.</p>

<p>When you require a Ruby file, the interpreter executes and caches it. If the file is required again (as in subsequent requests), the interpreter ignores the require statement and moves on. When you load a Ruby file, the interpreter executes the file again, no matter how many times it has been loaded before.</p>

<h4>Auto-Loading Code</h4>

<p>By following the naming convention, Rails will search <code>$LOAD_PATH</code> to find the undefined constant. So when using Rails console, <strong>you never have to explicitly <code>require</code> anything!</strong></p>

<p>Rails takes advantage of the fact that Ruby provides a callback mechanism for missing constants. When Rails encounters an undefined constant in the code, it uses a class loader routine based on file-naming conventions to find and require the needed Ruby script.</p>

<h4>Eager Load</h4>
<div class="highlight"><pre><code class="text">config.eager_load = false
</code></pre></div>
<p>In your production environment, you will want this set to true, as it copies most of your application in memory. This provides a performance increase to web servers that copy on write, such as Unicorn.</p>

<h4>Explain for Slow Queries</h4>
<div class="highlight"><pre><code class="text">config.active_record.auto_explain_threshold_in_seconds = 0.5
</code></pre></div>
<p>Introduced in Rails 3.2, Active Record now monitors the threshold of SQL queries being made. If any query takes longer than the specified threshold, the query plan is logged with a warning.</p>

<h4>Assets</h4>
<div class="highlight"><pre><code class="text">config.assets.debug = true
</code></pre></div>
<p>Setting config.assets.debug to false, would result in Sprockets concatenating and running preprocessors on all assets.</p>
<div class="highlight"><pre><code class="text">config.assets.compile = true
</code></pre></div>
<p>If an asset is requested that does not exist in the public/assets folder, Rails will throw an exception. To enable live asset compilation fallback on production, set config.assets.compile to true.</p>
<div class="highlight"><pre><code class="text">config.assets.enable = false
</code></pre></div>
<p>Like most features in Rails, the usage of the Asset Pipeline is completely optional. To include assets in your project as it was done in Rails 3.0, set config.assets.enabled to false.</p>

<h4>Tagged Logging <a href="http://arun.im/2011/x-request-id-tracking-taggedlogging-rails">ref</a></h4>
<div class="highlight"><pre><code class="text">config.log_tags = [ :subdomain, :uuid ]
</code></pre></div>
<p>Rails 3.2 introduced the ability to tag your log messages. <code>:subdomain</code> example by <em>www</em>, <code>:uuid</code> is a string to identify request, try <code>request.uuid</code>.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/05/18/han-han-wo-suo-li-jie-de-sheng-huo/">韩寒 - 我所理解的生活</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/18/rails4way-environments-and-configurations/">Rails4Way - Environments and Configurations</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Wendi -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
